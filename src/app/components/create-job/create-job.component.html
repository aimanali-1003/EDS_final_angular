<div class="job">
  <div class="job-content">
    <h2 class="job-title" style="font-size: 20.667px; font-weight: bold; font-family: 'Quicksand', sans-serif;">
      {{ isViewOnly ? 'View Job' : (isEdit ? 'Edit Job' : 'Create New Job') }}</h2>

    <form class="form-grid">

      <div class="form-row">
        <div class="form-item">
          <mat-form-field class="full-width">
            <input [disabled]="isViewOnly" matInput placeholder="Job Name" [(ngModel)]="jobData.jobType" name="jobType" required>
          </mat-form-field>
        </div>
      
        <div class="form-item">
          <mat-form-field class="full-width">
            <mat-select [disabled]="isViewOnly" placeholder="Template Name" [(ngModel)]="selectedTemplates" name="TemplateName" required>
              <mat-option *ngFor="let template of templates" [value]="template">{{ template.templateName }}</mat-option>
            </mat-select>
          </mat-form-field>
        </div>
      </div>

      <div class="form-row">
        <div class="form-item">
          <mat-form-field class="full-width">
            <mat-select [disabled]="isViewOnly" placeholder="Organization Name" [(ngModel)]="selectedOrganizationId" (selectionChange)="onOrganizationSelected($event.value)" name="OrganizationName" required>
              <mat-option *ngFor="let org of orgs" [value]="org.organizationID">{{ org.organizationLevel }}</mat-option>
            </mat-select>
          </mat-form-field>
        </div>
      
        <div class="form-item">
          <mat-form-field class="full-width">
            <mat-select [disabled]="!selectedOrganizationId || isViewOnly" placeholder="Select Client" [(ngModel)]="selectedClientId" name="clientName" required>
              <mat-option *ngFor="let client of organizationClients" [value]="client.clientID">{{ client.clientName }}</mat-option>
            </mat-select>
          </mat-form-field>
        </div>
      </div>

      <div class="form-row">
        <div class="form-item">
          <mat-form-field class="full-width">
            <mat-select [disabled]="isViewOnly" placeholder="Recipient Type" [(ngModel)]="selectedDataRecipientTypeId" name="RecipientType" required>
              <mat-option *ngFor="let type of dataRecipientTypes" [value]="type.recipientTypeID">{{ type.recipientType }}</mat-option>
            </mat-select>
          </mat-form-field>
        </div>
      
      
        <div class="form-item" >
          <mat-form-field class="full-width">
            <mat-select [disabled]="isViewOnly" placeholder="Frequency" [(ngModel)]="extractionFrequency" name="frequency" required>
              <mat-option *ngFor="let frequency of frequenciesData" [value]="frequency.frequencyType">{{ frequency.frequencyType }}</mat-option>
            </mat-select>
          </mat-form-field>
        </div>

        
      </div>

      <div *ngIf="extractionFrequency === 'Once'">
        <mat-form-field class="full-width">
          <input matInput type="date" [(ngModel)]="jobData.startDate" name="startDate" placeholder="Start Date" required>
        </mat-form-field>
      
        <mat-form-field class="full-width">
          <input matInput type="time" [(ngModel)]="jobData.startTime" name="startTime" placeholder="Start Time" required>
        </mat-form-field>
      
        <mat-form-field class="full-width">
          <input matInput type="time" [(ngModel)]="jobData.endTime" name="endTime" placeholder="End Time" required>
        </mat-form-field>
      </div>

      <div *ngIf="extractionFrequency === 'Daily'">
        <mat-form-field class="full-width">
          <input matInput type="time" [(ngModel)]="jobData.startTime" name="startTime" placeholder="Start Time" required>
        </mat-form-field>
      
        <mat-form-field class="full-width">
          <input matInput type="time" [(ngModel)]="jobData.endTime" name="endTime" placeholder="End Time" required>
        </mat-form-field>
      </div>

      <div *ngIf="extractionFrequency === 'Weekly'">
        <mat-form-field class="full-width">
          <mat-label>Select Days of the Week</mat-label>
          <mat-select [(ngModel)]="selectedDays" name="selectedDays" multiple>
            <mat-option value="Monday">Monday</mat-option>
            <mat-option value="Tuesday">Tuesday</mat-option>
            <mat-option value="Wednesday">Wednesday</mat-option>
            <mat-option value="Thursday">Thursday</mat-option>
            <mat-option value="Friday">Friday</mat-option>
            <mat-option value="Saturday">Saturday</mat-option>
            <mat-option value="Sunday">Sunday</mat-option>
          </mat-select>
        </mat-form-field>
      
        <mat-form-field class="full-width">
          <input matInput type="time" [(ngModel)]="jobData.startTime" name="startTime" placeholder="Start Time" required>
        </mat-form-field>
      
        <mat-form-field class="full-width">
          <input matInput type="time" [(ngModel)]="jobData.endTime" name="endTime" placeholder="End Time" required>
        </mat-form-field>
      </div>

      <div *ngIf="extractionFrequency === 'Monthly'">
        <mat-form-field class="full-width">
          <input matInput type="date" [(ngModel)]="jobData.startDate" name="startDate" placeholder="Start Date" required>
        </mat-form-field>
      
        <mat-form-field class="full-width">
          <input matInput type="date" [(ngModel)]="jobData.endDate" name="endDate" placeholder="End Date" required>
        </mat-form-field>
      
        <mat-form-field class="full-width">
          <input matInput type="time" [(ngModel)]="jobData.startTime" name="startTime" placeholder="Start Time" required>
        </mat-form-field>
      
        <mat-form-field class="full-width">
          <input matInput type="time" [(ngModel)]="jobData.endTime" name="endTime" placeholder="End Time" required>
        </mat-form-field>
      </div>

      <div class="form-row">
        <mat-form-field class="form-item">
          <mat-select [disabled]="isViewOnly" placeholder="File Format: " [(ngModel)]="fileFormatstore" name="fileFormat" required>
            <mat-option *ngFor="let fileformat of fileFormatJobs" [value]="fileformat.fileFormatName">{{ fileformat.fileFormatName }}</mat-option>
          </mat-select>
        </mat-form-field>
      </div>
      
      <div *ngIf="!isViewOnly" class="button-container" style="padding-top: 10px;">
        <button *ngIf="!isEdit" mat-button class="luxury-modal-button-cancel" (click)="goToJobScreen()" > <span class="icon">&#10006;</span> Cancel</button>
        <button *ngIf="!isEdit" mat-raised-button class="create-job-button" type="submit" (click)="createUpdatejob()"><mat-icon style="margin-right: 8px;">done_all</mat-icon>Create Job</button>
        <button *ngIf="isEdit"  mat-button class="luxury-modal-button-cancel" (click)="goToJobScreen()"> <span class="icon">&#10006;</span> Cancel</button>
        
        <button *ngIf="isEdit"  mat-raised-button class="create-client-button" (click)="createUpdatejob()">
          <mat-icon style="margin-right: 8px;">done_all</mat-icon> Save Changes
        </button>
      </div>
    </form>
  </div>
</div>

